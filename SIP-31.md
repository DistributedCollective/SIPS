---
SIP: 31
Title: Splitting AMM fees with stakers
Author: John Light (@john-light)
Status: Draft
Track: Parameter
Created: 2021-09-07
---

# SIP-31: Splitting AMM fees with stakers

## Description

- Currently only AMM Liquidity Providers earn a fee from swaps conducted using the Sovryn AMM.  
- This change will split the swap fee between AMM Liquidity Providers and the Fee Proxy contract (the smart contract responsible for holding fees until stakers withdraw them). In the implementation proposed by this SIP, only fees from Token -> Token and RBTC -> Token swaps will be eligible to be split.  
- The split on eligible fees will be 0.25% to LPs / 0.05% to Fee Proxy.  

## Motivation

Although the Sovryn AMM is a core piece of the Sovryn protocol, which SOV stakers must take care to govern well, SOV stakers earn no share of the fees generated by the AMM and are therefore out of alignment with the incentives of AMM LPs. This SIP aims to better align the incentives between SOV stakers and AMM LPs by splitting AMM fees between SOV stakers and AMM LPs.

The change proposed here works with the existing swap module of the Sovryn Trading and Lending protocol, and is therefore the easiest way to implement this change. There are however two limitations to this implementation: (1) the fee split can be circumvented if the AMM is interacted with outside of the Sovryn frontend interface, and (2) the swap module only supports splitting off WRBTC, which would necessitate a manual unwrap transaction to use the RBTC in the Sovryn app, so fees from Token -> RBTC swaps will not be part of the split. While these limitations are not ideal, Sovryn developers believe some fee split is better than no split and it is worth making this change now while a more comprehensive solution is developed.

It is planned that a SIP will be introduced in the near future to update the AMM smart contract to support (1) splitting the fee in a way that cannot be circumvented and (2) splitting fees to RBTC so no manual unwrapping is necessary, enabling _all_ fees to be included in the fee split.

## Alternatives considered

Due to the limitations of the existing swap module, several alternatives were considered for implementing the fee split:
1. Add a wrapper contract that would support splitting + unwrapping WRBTC to RBTC automatically. This was not chosen because it is an inelegant architectural design that would add complexity and cost due to the addition of another smart contract.  
2. Split all fees and leave traders to manually unwrap WRBTC to RBTC themselves. This was not chosen because it would introduce more complexity to the Sovryn frontend and create an inconvenience for traders.  
3. Delay the fee split implementation until a change to the AMM smart contract is ready that would allow all fees to be split, including automatically splitting off RBTC. This was not chosen because there is a partial solution available that supports a fee split now, and there is no good reason to delay until the more complete implementation is ready.  

## Running the numbers

To assess the impact of the choice to exclude Token -> RBTC swaps from fee split eligibility, Sovryn developers did an analysis on the past 30 days of swap data, broken into three categories:  

1. RBTC in (RBTC -> Token)  
2. RBTC out (Token -> RBTC)  
3. Composite (Token -> Token)  

This is how the fee split breaks down as implemented in this SIP:

|	Category  | Volume (BTC) | %   | Fee split  |
| --------- |:------------:|:---:|:----------:|
| RBTC in   |	1032.9719    | 42% | ✅         |
| RBTC out  |	989.1421     | 40% | ❌         |
| Composite |	432.1512     | 18% | ✅         |

In summary, according to the last 30 days of swap data, the fee split implemented in this split would have resulted in ~40% of the swap volume being excluded and ~60% of the swap volume being included for eligiblity for the fee split.

## License
Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).
