---
SIP: '0042'
Title: Staking contract updates
Author: Tyrone Johnson (@tjcloa)
Status: Ready for vote
Track: Contract
Created: 2022-03-21
---

# SIP-0042: Staking contract updates

## Description  

If approved, this proposal will:

1. Replace the current staking contract with a new staking contract, with the only changes being targeted fixes for the issues described below.
2. Add the Exchequer Multisig as a pauser to the Staking contract, with the authority to set the contract on pause or freeze in case of emergency.

## Motivation  

**Improve security of the Staking contract**  

While going through our smart contracts to verify all their owners and their privileges, and to make sure all admin functions are effectively controlled by either a multisig or governance, we noticed something missing from our most important contract Staking.sol which is the heart and soul of our governance part of the protocol and we currently have no means to pause it in case of emergency. It means that we may find ourselves in a position where we notice a hack or maybe even could prevent that hack but we would have no means to stop exploits and to be able to do that we need to act fast.

This is why we are introducing a **Pause** functionality.

It might seem counterintuitive at first, since we want Staking to be unstoppable obviously, but there is a distinction to make between long term and short term, and a tradeoff to make between security and immutability.

By adding a pause function controlled by a multisig, we will have a way to thwart many kinds of exploits, whether they are caused by a bug in our protocol or by an new ecosystem element (think about when flashloans first appeared in DeFi).

Governance keeps full control of the pauser address, we make sure that even if the multisig owners collude for or are coerced into abusing their power to pause the Staking contract, governance can override by switching the pauser rights to another address. The same works in case multisig is unable to unpause the contract, which could theoretically happen, excluding voluntary collusion, in case too many signers are kept away from their keys, e.g. by being taken into custody, or hospitalized in a pandemic scenario.

The solution we propose has one more twist to make these rare events of pausing less frightening and less annoying to our users. In many cases, we can still allow users to unstake during the pause, while we lock the rest of the contract until we prepare and deploy a fix. This is how the Pause functionality is designed, so that we do not lock users' funds into the system for the duration of the pause.

To cover the cases where the detected bug could be exploited through unstaking, we also included a **Freeze** functionality in the implementation for this SIP, which locks the contract up completely, including unstaking.

## Proposed change  

- Existing Staking Logic contract: `0x4BaBb34189a9CDa8213D24DD3984058Fb8A955D2`
- The new Staking Logic contract: ``
- Proposed changes: https://github.com/DistributedCollective/Sovryn-smart-contracts/pull/423

## License
Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).
